{% extends 'basef.html.twig' %}

{% block body %}
    {% block stylesheets %}
        <style>
            #search-form-container form {
                display: flex;
                flex-direction: column;
                gap: 1rem;
            }
            #search-form-container label {
                font-weight: bold;
            }
            #search-form-container input[type="text"],
            #search-form-container select {
                padding: 0.5rem;
                border: 1px solid #ccc;
                border-radius: 4px;
                font-size: 1rem;
            }
            #search-form-container select {
                appearance: none;
                padding-right: 2rem;
                background: url('down-arrow.png') no-repeat right center;
                background-size: 1.5rem;
            }
            #search-form-container input[type="submit"] {
                background-color: #007bff;
                color: #fff;
                padding: 0.5rem 1rem;
                border: none;
                border-radius: 4px;
                cursor: pointer;
            }
            #search-form-container input[type="submit"]:hover {
                background-color: #0069d9;
            }
            #show-search-btn {
                float: right;
            }
            #show-search-btn {
                font-size: 1.5rem;
                padding: 1rem 2rem;
                border-radius: 10px;
                transition: all 0.2s ease-in-out;
            }
            #show-search-btn:hover {
                transform: scale(1.1);
                box-shadow: 0px 0px 10px #ccc;
            }
            button[type="submit"] {
                font-size: 1.5rem;
                padding: 1rem 2rem;
                border-radius: 10px;
                transition: all 0.2s ease-in-out;
                background-color: #007bff;
                color: #fff;
                border: none;
            }
            button[type="submit"]:hover {
                transform: scale(1.1);
                box-shadow: 0px 0px 10px #ccc;
            }
        </style>

    {% endblock %}
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

    <script type="text/javascript">
        jQuery(document).ready(function() {
            let searchRequest = null;
            $("#search").keyup(function() {
                const minlength = 3;
                let that = this;
                let value = $(this).val();
                let entitySelector = $("#entitiesNav").html('');
                if (value.length >= minlength ) {
                    if (searchRequest != null)
                        searchRequest.abort();
                    searchRequest = $.ajax({
                        type: "GET",
                        url: "{{ path('ajax_search') }}",
                        data: {
                            'q' : value
                        },
                        dataType: "text",
                        success: function(msg){
                            //we need to check if the value is the same
                            if (value===$(that).val()) {
                                let result = JSON.parse(msg);
                                $.each(result, function(key, arr) {
                                    $.each(arr, function(id, value) {
                                        if (key === 'entities') {
                                            if (id !== 'error') {
                                                entitySelector.append('<li><a href="/daten/'+id+'">'+value+'</a></li>');
                                            } else {
                                                entitySelector.append('<li class= "errorLi">'+value+'</li>');
                                            }
                                        }
                                    });
                                });
                            }
                        }
                    });
                }
            });
        });
    </script>
    <div class="text-center mt-4">
        <div style="display: inline-block; text-align: center;">
            <label for="search-bar" class="text-white fs-5 me-2">Search:</label>
            <input type="text" id="search" placeholder="Enter contrat name..." class="form-control w-auto d-inline-block">
            <button type="button" class="btn btn-primary latest-comments" id="clear-search">Clear</button>

        </div>
    </div>
<div class="container-fluid-lg">
    <div class="title">
        <h2>Related Contrat</h2>

    </div>

    <div class="row row-cols-1 row-cols-md-4 g-4">
        {% for c in contrat %}


                <a href="{{ path('app_type_contrat_indexf') }}">
                    <img src="{{ asset('/images/product/' ~ c.imagecontrat) }}" class="card-img-top" alt="">
                </a>
                <div class="card-body">
                    <h5 class="card-title">date signature: {{ c.datesignature|date("d/m/Y") }}</h5>

                </div>



        {% endfor %}
    </div>
    <div>
        <a href="{{ path('PDF') }}">PDF </a>
    </div>
    <audio controls>
        <source src="{{ asset('audio/Baauer - Harlem Shake.mp3') }}" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>
</div>

{% endblock %}